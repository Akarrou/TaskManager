---
description: 
globs: 
alwaysApply: false
---
---
description: Architecture du projet AgroFlow - source unique de vÃ©ritÃ© pour la structure
globs: ["**/*"]
alwaysApply: false
---

# ğŸ›ï¸ Architecture du Projet Task Manager

## RÃ´le & Contexte
Ce fichier est la source unique de vÃ©ritÃ© pour lâ€™architecture et lâ€™arborescence du projet Task Manager. Il doit Ãªtre rÃ©fÃ©rencÃ© par toutes les autres rÃ¨gles.

---

## ğŸ“ Arborescence du Frontend (Angular)

L'arborescence suit la structure standard d'un projet Angular CLI.

```text
TaskManager-Angular/
  src/
    app/
      core/                  # Services transverses, Guards, Intercepteurs
        guards/
        services/
          auth.service.ts    # Logique d'authentification
          supabase.service.ts # Client et interactions Supabase
          task.service.ts    # Logique mÃ©tier des tÃ¢ches
      features/              # Modules fonctionnels par domaine
        auth/
          login/
        dashboard/
        tasks/
          task-form/
          task-tree/
      shared/                # Composants, pipes, directives rÃ©utilisables
        components/
        pipes/
        directives/
      store/                 # Ã‰tat global NgRx
        reducers/
        effects/
        actions/
        selectors/
      styles/                # Styles globaux (ex: _variables.scss)
    assets/                  # Ressources statiques (images, etc.)
    environments/            # Configuration par environnement
  ...
```

---

## ğŸ§‘â€ğŸ’» Exemples de Patterns Structurels

- **SÃ©paration claire des responsabilitÃ©s** : Chaque dossier a un rÃ´le prÃ©cis (`core` pour la logique transverse, `features` pour les domaines mÃ©tier, `shared` pour le code rÃ©utilisable).
- **Organisation par feature** : Chaque fonctionnalitÃ© mÃ©tier (ex: `tasks`) est isolÃ©e dans son propre dossier sous `features/`, contenant ses composants, services et Ã©ventuellement son propre Ã©tat NgRx.
- **Ã‰tat global centralisÃ©** : La gestion de l'Ã©tat avec NgRx est regroupÃ©e dans le dossier `src/app/store`.
- **Convention de nommage** : Tout en anglais, PascalCase pour les classes, kebab-case pour les fichiers.

---

## ğŸ”— RÃ©fÃ©rences croisÃ©es

- Ce document doit Ãªtre rÃ©fÃ©rencÃ© dansâ€¯:
  - [40_guidelines-frontend.mdc](mdc:40_guidelines-frontend.mdc)
  - [task-manager-project-guidelines.mdc](mdc:task-manager-project-guidelines.mdc)

---

## âš ï¸ RÃˆGLE DE MISE Ã€ JOUR : Check-list de sortie

**AVANT de finaliser une tÃ¢che impliquant une modification de la structure du projet**, l'IA doit :

1.  âœ… **VÃ©rifier la cohÃ©rence** : S'assurer que les changements respectent les patterns architecturaux existants.
2.  âœï¸ **Proposer une mise Ã  jour** : Identifier si des sections de ce document sont devenues obsolÃ¨tes.
3.  ğŸ“‹ **GÃ©nÃ©rer un plan de mise Ã  jour** : Proposer les modifications Ã  appliquer Ã  ce fichier pour qu'il reflÃ¨te le nouvel Ã©tat du projet.

Cette vÃ©rification garantit que la documentation architecturale reste synchronisÃ©e avec le code.

### ğŸ”„ **Exemple de proposition de mise Ã  jour**

```markdown
### ğŸ”„ Proposition de Mise Ã  Jour de l'Architecture - [Date]
**TÃ¢che concernÃ©e** : #{numÃ©ro} - {titre}
**Changements structurels dÃ©tectÃ©s** :
- âœ… **AjoutÃ©** : `shared/utils/src/lib/validators/`
- âŒ **SupprimÃ©** : `shared/core/src/lib/old-validator.ts`

**Impact et proposition de modification** :
La nouvelle librairie de validateurs doit Ãªtre ajoutÃ©e Ã  l'arborescence Frontend.
*Modification proposÃ©e pour `10_project-architecture.mdc` :*
`// ... existing code ...
    shared/
      ui/
      utils/         # <-- AJOUTER CETTE LIGNE
        src/
// ...`
```

---

## ğŸ“ Bonnes pratiques

- **Synchronisation automatique obligatoire** : Ce document DOIT Ãªtre mis Ã  jour Ã  chaque modification structurelle
- **Source unique de vÃ©ritÃ©** : Utiliser ce document comme rÃ©fÃ©rence absolue pour l'architecture AgroFlow
- **Documentation des patterns** : Chaque nouveau pattern doit Ãªtre documentÃ© avec ses exemples
- **CohÃ©rence architecturale** : Valider que chaque ajout respecte les conventions existantes
- **TraÃ§abilitÃ© des changements** : Maintenir un historique des Ã©volutions structurelles


Chaque modification doit inclure :
```markdown
### ğŸ”„ Mise Ã€ Jour Architecture - [Date]
**Changements dÃ©tectÃ©s** :
- âœ… **AjoutÃ©** : [Nouveaux Ã©lÃ©ments avec chemins]
- âŒ **SupprimÃ©** : [Ã‰lÃ©ments retirÃ©s]
- ğŸ“ **DÃ©placÃ©** : [Ancienne â†’ Nouvelle position]

**Impact architectural** :
- [Explication de la logique structurelle]
- [CohÃ©rence avec les patterns existants]
- [Implications pour les autres modules]
```
### âš¡ **DÃ©clencheurs Automatiques**

Cette mise Ã  jour DOIT Ãªtre dÃ©clenchÃ©e automatiquement lors de :
- CrÃ©ation de nouveaux composants Angular (`ng generate component`)
- Ajout de nouveaux services, controllers, entitÃ©s
- CrÃ©ation de nouveaux modules ou libraries
- Modification de la structure des dossiers
- Ajout de nouveaux types de fichiers (configurations, migrations, etc.)

---

## ğŸ“ Bonnes pratiques

- **Synchronisation automatique obligatoire** : Ce document DOIT Ãªtre mis Ã  jour Ã  chaque modification structurelle
- **Source unique de vÃ©ritÃ©** : Utiliser ce document comme rÃ©fÃ©rence absolue pour l'architecture AgroFlow
- **Documentation des patterns** : Chaque nouveau pattern doit Ãªtre documentÃ© avec ses exemples
- **CohÃ©rence architecturale** : Valider que chaque ajout respecte les conventions existantes
- **TraÃ§abilitÃ© des changements** : Maintenir un historique des Ã©volutions structurelles

