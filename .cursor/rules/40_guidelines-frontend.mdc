---
description: Guidelines frontend Angular 19, Nx, Tailwind, ngx-translate pour AgroFlow
globs: ["Front/agroflow-workspace/**/*.ts", "Front/agroflow-workspace/**/*.html", "Front/agroflow-workspace/**/*.scss", "Front/agroflow-workspace/**/*.json"]
alwaysApply: false
---
---
description: Guidelines frontend Angular 19, Nx, Tailwind, ngx-translate pour AgroFlow
globs: ["Front/agroflow-workspace/**/*.{ts,html,scss,json}", "Front/agroflow-workspace/**/package.json"]
alwaysApply: false
---

# 40_guidelines-frontend.mdc

## R√¥le & Contexte
Ce fichier centralise toutes les conventions, patterns, anti-patterns et bonnes pratiques Angular 19, Nx, Tailwind, ngx-translate et i18n pour le d√©veloppement frontend AgroFlow.

---

# üìò Contexte G√©n√©ral

Ce document d√©finit les conventions, l'architecture et les bonnes pratiques sp√©cifiques au d√©veloppement frontend Angular 19 (Nx workspace, Tailwind CSS, ngx-translate, etc.) du projet AgroFlow.

---

# üß∞ Environnement et D√©pendances

- **Gestion des d√©pendances** :
  - Utiliser `pnpm` dans le r√©pertoire `Front/agroflow-workspace`.
  - Cibler les versions de d√©pendances compatibles avec **Angular 19**.

---

# üß± Structure du Projet (Nx Workspace)

> **Voir l'arborescence compl√®te et les patterns dans [10_project-architecture.mdc](mdc:10_project-architecture.mdc)**

- **`apps/`** : Contient les applications Angular (ex. `admin`).
- **`libs/`** : Contient les biblioth√®ques partag√©es :
  - `ui/` : Composants r√©utilisables (boutons, formulaires, modales, etc.).
  - `core/` : Services essentiels (authentification, intercepteurs, guards).
  - `data-access/` : Services d'acc√®s aux donn√©es et gestion de l'√©tat (stores).
  - `models/` : Interfaces et types TypeScript.
  - `i18n/` : Fichiers de traduction et ressources d'internationalisation.
- **`scripts/`** : Scripts utilitaires (ex. `merge-translations.js`).

---

# üßë‚Äçüíª Conventions de Nommage et Standards de Codage

- **Composants Angular** :
  - Nom de fichier au format _kebab-case_. Exemple : `user-profile.component.ts`.
  - Utiliser des composants autonomes (`standalone: true`) pour favoriser la modularit√©.
  - **Structure de fichiers obligatoire** :
    - Chaque composant DOIT avoir trois fichiers s√©par√©s :
      - `.ts` : fichier TypeScript du composant
      - `.html` : fichier template HTML (utiliser `templateUrl` dans le d√©corateur)
      - `.scss` : fichier de styles SCSS (utiliser `styleUrls` dans le d√©corateur)
    - L'utilisation de `template:` dans le d√©corateur `@Component` est **INTERDITE**. Toujours utiliser `templateUrl:` pour r√©f√©rencer un fichier `.html` externe.
- **Services Angular** :
  - Nom de fichier avec le suffixe `.service.ts`. Exemple : `authentication.service.ts`.
- **Mod√®les et Interfaces TypeScript** :
  - Nom de fichier avec le suffixe `.model.ts`. Exemple : `account.model.ts`.
  - Interfaces pr√©fix√©es par `I`. Exemple : `IUser`.
- **TypeScript** :
  - Activer le _strict mode_ pour garantir la s√©curit√© des types.
  - Ne jamais utiliser le type `any`, sauf cas exceptionnel d√ªment justifi√©.
  - Pr√©f√©rer l'injection de services via la fonction `inject()` plut√¥t que via le constructeur.
  - Utiliser des types explicites et √©viter les types implicites.
  - Appliquer des fonctions pures et favoriser l'immutabilit√©.
- **Organisation du code** :
  - Structurer les fichiers avec l'ordre suivant : imports, d√©corateur, classe, propri√©t√©s, m√©thodes.
  - Respecter l'ordre des imports : Angular > RxJS > Modules sp√©cifiques > Imports relatifs.

---

# üé® Style et Formatage

- **Linting et Formatage** :
  - Respecter imp√©rativement les r√®gles d√©finies par ESLint, Prettier et Angular ESLint.
- **CSS/SCSS** :
  - Utiliser Tailwind CSS pour le style des composants.
  - √âviter la manipulation directe du DOM ; utiliser les directives Angular appropri√©es.
  - Utiliser `NgOptimizedImage` pour l'optimisation et la maintenabilit√©.
- **Performance** :
  - Impl√©menter le _lazy loading_ pour les modules non critiques au chargement initial de l'application.
  - Utiliser les nouvelles directives introduites avec Angular 19.
  - Appliquer des _pipes_ purs pour les op√©rations co√ªteuses en calcul.
- **Gestion de l'√©tat** :
  - Utiliser les `signals` pour la gestion r√©active de l'√©tat.
  - Appliquer l'`async pipe` dans les templates pour g√©rer les observables.
- **Tests** :
  - Impl√©menter des tests unitaires en suivant le pattern Arrange-Act-Assert.
  - Utiliser des outils tels que Jest ou Karma pour les tests unitaires.

---

# üéØ Composants Communs AgroFlow

**R√àGLE FONDAMENTALE** : Il est **OBLIGATOIRE** d'utiliser les composants communs d'AgroFlow en priorit√© absolue lors de la construction de nouvelles fonctionnalit√©s. Ne jamais r√©inventer ou recr√©er des composants qui existent d√©j√†.

## üìã Liste des Composants Disponibles

### üîß Composants Utilitaires
- **`AddressComponent`** (`lib-address`) : Gestion compl√®te des adresses avec `ControlValueAccessor`
- **`SpinnerComponent`** (`agroflow-spinner`) : Indicateur de chargement avec diff√©rentes tailles
- **`LogoComponent`** (`app-logo`) : Logo AgroFlow avec tailles configurables
- **`RouteAnimationComponent`** (`lib-route-animation`) : Animations de transition entre routes

### üéõÔ∏è Composants d'Interface
- **`ButtonComponent`** (`agroflow-button`) : Boutons avec styles coh√©rents (default, success, danger)
- **`HeaderComponent`** (`agroflow-header`) : En-t√™te de l'application avec menu utilisateur
- **`NavigationBarComponent`** (`agroflow-navigation-bar`) : Barre de navigation avec boutons d'action
- **`LanguageSelectorComponent`** (`agroflow-language-selector`) : S√©lecteur de langue FR/EN

### üìù Composants de Formulaire
- **`ControlMessagesComponent`** (`lib-control-messages`) : Affichage des messages d'erreur de validation
- **`PriceInputComponent`** (`lib-price-input`) : Saisie de prix avec calculs TVA automatiques
- **`WebcamCaptureComponent`** (`agroflow-webcam-capture`) : Capture d'images via webcam

### üìä Composants de Donn√©es
- **`DataTableComponent`** (`agroflow-data-table`) : Tables de donn√©es avec tri, filtrage et pagination
- **`StepperComponent`** (`lib-stepper`) : Assistant par √©tapes (wizard)

### üí¨ Composants de Communication
- **`ConfirmDialogComponent`** (`lib-confirm-dialog`) : Dialogues de confirmation
- **`CustomSnackbarComponent`** (`lib-custom-snackbar`) : Notifications toast personnalis√©es
- **`SnackbarService`** : Service pour g√©rer les notifications (info, success, warning, error)
- **`LoginComponent`** (`agroflow-login`) : Composant de connexion complet

## üéØ R√®gles d'Utilisation Prioritaire

### ‚úÖ Obligations
1. **Toujours v√©rifier** si un composant commun existe avant de cr√©er du code personnalis√©
2. **Utiliser exclusivement** les composants AgroFlow pour :
   - Tous les boutons ‚Üí `ButtonComponent`
   - Toutes les tables ‚Üí `DataTableComponent`
   - Toutes les notifications ‚Üí `SnackbarService`
   - Tous les spinners ‚Üí `SpinnerComponent`
   - Toutes les confirmations ‚Üí `ConfirmDialogComponent`
   - Toutes les adresses ‚Üí `AddressComponent`
   - Tous les prix ‚Üí `PriceInputComponent`

### ‚ùå Interdictions
- **JAMAIS** utiliser `mat-button`, `mat-raised-button`, etc. ‚Üí Utiliser `ButtonComponent`
- **JAMAIS** utiliser `mat-table` ‚Üí Utiliser `DataTableComponent`
- **JAMAIS** utiliser `MatSnackBar` directement ‚Üí Utiliser `SnackbarService`
- **JAMAIS** cr√©er des spinners custom ‚Üí Utiliser `SpinnerComponent`
- **JAMAIS** cr√©er des dialogues de confirmation custom ‚Üí Utiliser `ConfirmDialogComponent`

### üîÑ Processus de Validation
Avant toute impl√©mentation, se poser la question :
1. "Ce composant/cette fonctionnalit√© existe-t-elle d√©j√† dans les composants communs ?"
2. "Puis-je adapter un composant existant plut√¥t que d'en cr√©er un nouveau ?"
3. "Ai-je consult√© la documentation des composants disponibles ?"

### üìö Localisation des Composants
- **Chemin** : `Front/agroflow-workspace/shared/ui/src/lib/components/`
- **Import** : `@agroflow-workspace/ui`

---

# üìù Formulaires et Angular Material

- **Utilisation obligatoire d'Angular Material** :
  - **TOUS** les formulaires DOIVENT utiliser Angular Material comme framework UI.
  - Importer les modules Material n√©cessaires : `MatFormFieldModule`, `MatInputModule`, `MatSelectModule`, `MatCheckboxModule`, etc.
  - Utiliser `mat-form-field` avec `appearance="outline"` et `color="primary"` pour tous les champs de saisie.

- **Composant de r√©f√©rence** :
  - Le composant `raw-material-form` situ√© dans `Front/agroflow-workspace/apps/admin/src/app/raw-materials/raw-material-form/` est la **r√©f√©rence officielle** pour la cr√©ation de formulaires.
  - Respecter sa structure et son organisation pour tous les nouveaux formulaires.

- **Structure de formulaire obligatoire** :
  - **Sections de formulaire** : Organiser le formulaire en sections logiques avec des titres (`form-section`, `section-title`).
  - **Responsive design** : Utiliser une grille flexible avec `form-row` et `form-group` pour l'adaptabilit√© mobile.
  - **Gestion des √©tats** : Impl√©menter un √©tat de chargement (`isLoading`) qui d√©sactive le formulaire pendant les op√©rations.
  - **Actions de formulaire** : Placer les boutons d'action dans une section d√©di√©e (`form-actions`) en bas du formulaire.
  - **Styles CSS** : Les styles CSS pour les formulaires sont **d√©j√† disponibles dans les styles communs** d'AgroFlow. Utiliser les classes pr√©d√©finies (`container`, `material-form`, `form-section`, `section-title`, `form-row`, `form-group`, `form-actions`, etc.) sans les red√©finir.

- **Validation et gestion d'erreurs** :
  - Utiliser `ReactiveFormsModule` avec des `FormControl` typ√©s.
  - Impl√©menter la validation avec `Validators` d'Angular.
  - Utiliser le composant `ControlMessagesComponent` d'AgroFlow pour afficher les messages d'erreur.
  - Utiliser le pipe `FormControlPipe` pour le typage des contr√¥les dans les templates.

- **Composants AgroFlow √† utiliser** :
  - **Boutons** : Utiliser exclusivement `ButtonComponent` d'AgroFlow au lieu des boutons Material natifs.
  - **Spinner** : Utiliser `SpinnerComponent` d'AgroFlow pendant les √©tats de chargement.
  - **Messages** : Utiliser `SnackbarService` d'AgroFlow pour les notifications de succ√®s/erreur.

- **Bonnes pratiques sp√©cifiques** :
  - D√©sactiver le formulaire pendant les op√©rations (`pointer-events: none` + `opacity: 0.7`).
  - Marquer tous les champs comme touch√©s avant la soumission pour afficher les erreurs.
  - Impl√©menter une navigation de retour via les `NavigationButton`.
  - Utiliser des placeholders traduits pour tous les champs de saisie.

---

# üìä Listes et Tables de Donn√©es

- **Utilisation obligatoire du DataTableComponent d'AgroFlow** :
  - **TOUTES** les listes de donn√©es DOIVENT utiliser le composant `agroflow-data-table` d'AgroFlow.
  - Ne jamais utiliser `mat-table` ou d'autres composants de table directement.

- **Composant de r√©f√©rence pour les listes** :
  - Le composant `raw-materials` situ√© dans `Front/agroflow-workspace/apps/admin/src/app/raw-materials/` est la **r√©f√©rence officielle** pour la cr√©ation de listes de donn√©es.
  - Respecter sa structure et son organisation pour toutes les nouvelles listes.

- **Structure de liste obligatoire** :
  - **Configuration des colonnes** : D√©finir les colonnes avec le type `TableColumn[]` incluant les propri√©t√©s `name`, `property`, `cols`, `sortable`, `filterable`.
  - **Actions standardis√©es** : Utiliser un tableau d'actions avec `icon` et `tooltip` pour les op√©rations CRUD.
  - **Gestion des √©tats** : Impl√©menter des `signals` pour `isLoading` et les donn√©es.
  - **Navigation** : Impl√©menter `NavButtonsProvider` avec des boutons "Ajouter" et "Actualiser".

- **Fonctionnalit√©s obligatoires** :
  - **Gestion des clics** : Impl√©menter `onActionClick`, `onRowClick`, et `onCellClick`.
  - **Confirmation de suppression** : Utiliser `ConfirmDialogComponent` d'AgroFlow pour les suppressions.
  - **Copie d'ID** : Permettre la copie des identifiants en cliquant dessus avec le service `Clipboard`.
  - **Traductions dynamiques** : Impl√©menter des m√©thodes de traduction pour les √©num√©rations et listes.

- **Services et composants √† utiliser** :
  - **Table** : Utiliser exclusivement `DataTableComponent` d'AgroFlow.
  - **Confirmation** : Utiliser `ConfirmDialogComponent` d'AgroFlow pour les dialogues de confirmation.
  - **Notifications** : Utiliser `SnackbarService` d'AgroFlow pour les messages de succ√®s/erreur.
  - **Navigation** : Utiliser le `Router` Angular pour la navigation entre les vues.

- **Bonnes pratiques pour les listes** :
  - Charger les donn√©es de r√©f√©rence (ex: companies) avant les donn√©es principales.
  - Impl√©menter une m√©thode `refresh` pour recharger les donn√©es.
  - Utiliser des m√©thodes de rendu personnalis√©es pour les colonnes complexes.
  - G√©rer les √©tats de chargement de mani√®re granulaire avec des `signals`.
  - Impl√©menter la troncature des IDs longs avec possibilit√© de copie compl√®te.

---

# üìê Mod√®les de R√©f√©rence AgroFlow

**R√àGLE FONDAMENTALE** : Les composants suivants servent de **MOD√àLES DE R√âF√âRENCE OFFICIELS** √† copier et adapter pour cr√©er de nouvelles fonctionnalit√©s. Ils respectent toutes les bonnes pratiques et conventions d'AgroFlow.

## üèÜ Mod√®le de R√©f√©rence Principal : Raw Materials

Le module **`raw-materials`** situ√© dans `Front/agroflow-workspace/apps/admin/src/app/raw-materials/` est le **MOD√àLE COMPLET** √† suivre pour cr√©er de nouveaux modules CRUD.

### üìÅ Structure Compl√®te du Mod√®le

```
raw-materials/
‚îú‚îÄ‚îÄ raw-materials.component.ts          # Liste/Table principale
‚îú‚îÄ‚îÄ raw-materials.component.html        # Template de liste
‚îú‚îÄ‚îÄ raw-materials.component.scss        # Styles de liste
‚îú‚îÄ‚îÄ raw-material-form/
‚îÇ   ‚îú‚îÄ‚îÄ raw-material-form.component.ts  # Formulaire Create/Edit
‚îÇ   ‚îú‚îÄ‚îÄ raw-material-form.component.html # Template formulaire
‚îÇ   ‚îî‚îÄ‚îÄ raw-material-form.component.scss # Styles formulaire
‚îî‚îÄ‚îÄ raw-materials.routes.ts             # Configuration des routes
```

### üéØ Fonctionnalit√©s Impl√©ment√©es (√Ä Copier)

#### ‚úÖ Composant Liste (`raw-materials.component.ts`)
- **DataTableComponent** avec configuration compl√®te des colonnes
- **Signals** pour la gestion d'√©tat (`isLoading`, `rawMaterials`, `companies`)
- **Actions CRUD** : Edit, Delete avec confirmations
- **Navigation** : Impl√©mentation de `NavButtonsProvider` et `TitleProvider`
- **Traductions dynamiques** : M√©thodes de rendu pour √©num√©rations
- **Gestion des clics** : `onActionClick`, `onRowClick`, `onCellClick`
- **Copie d'ID** : Fonctionnalit√© de copie des identifiants
- **Chargement de donn√©es li√©es** : Companies avant Raw Materials

#### ‚úÖ Composant Formulaire (`raw-material-form.component.ts`)
- **Angular Material** complet avec tous les modules n√©cessaires
- **ReactiveFormsModule** avec `FormControl` typ√©s
- **Validation** compl√®te avec `ControlMessagesComponent`
- **Gestion des √©num√©rations** : StorageCondition, Allergen
- **Mode Create/Edit** : Detection automatique avec param√®tres de route
- **√âtats de chargement** : Spinner et d√©sactivation de formulaire
- **Navigation** : Boutons de retour et actions
- **Structure CSS** : Utilisation des classes communes AgroFlow

#### ‚úÖ Routes (`raw-materials.routes.ts`)
- **Configuration standard** : Liste, Create, Edit
- **Param√®tres** : Gestion des IDs pour l'√©dition
- **Lazy Loading** : Structure modulaire

### üîÑ Processus de Copie du Mod√®le

1. **Dupliquer** le dossier `raw-materials/` entier
2. **Renommer** tous les fichiers avec le nouveau nom d'entit√©
3. **Remplacer** toutes les occurrences de "RawMaterial" par la nouvelle entit√©
4. **Adapter** les colonnes, champs et validations selon les besoins
5. **Mettre √† jour** les traductions dans les fichiers i18n
6. **Configurer** les routes dans le module parent

### üé® √âl√©ments Sp√©cifiques √† Adapter

#### Colonnes DataTable
```typescript
protected readonly columns: TableColumn[] = [
  { name: 'ENTITY.FORM.ID', property: 'entityId', isId: true, cols: 1 },
  { name: 'ENTITY.FORM.NAME', property: 'name', cols: 2, sortable: true },
  // ... autres colonnes selon l'entit√©
  { name: 'COMMON.ACTIONS', property: 'actions', isAction: true, cols: 1 },
];
```

#### Formulaire ReactiveForm
```typescript
this.entityForm = this.fb.group<EntityFormGroup>({
  name: this.fb.control('', { validators: [Validators.required] }),
  // ... autres champs selon l'entit√©
});
```

#### Services et Imports
- Adapter les `inject()` de services selon l'entit√©
- Mettre √† jour les imports des models et √©num√©rations
- Configurer les appels API appropri√©s

## ‚ö†Ô∏è R√®gles de Copie Strictes

### ‚úÖ √Ä Conserver Obligatoirement
- **Structure des fichiers** : 3 fichiers s√©par√©s (.ts, .html, .scss)
- **Composants AgroFlow** : ButtonComponent, DataTableComponent, etc.
- **Patterns de code** : Signals, inject(), FormGroup typ√©
- **Gestion d'erreurs** : SnackbarService pour toutes les notifications
- **Navigation** : Impl√©mentation des providers TitleProvider/NavButtonsProvider

### ‚ùå √Ä NE JAMAIS Modifier
- **Architecture g√©n√©rale** : Structure des dossiers et fichiers
- **Composants utilis√©s** : Toujours les composants communs AgroFlow
- **Patterns de state** : Signals et gestion r√©active
- **Conventions de nommage** : Kebab-case, suffixes, etc.

### üîÑ √Ä Adapter Selon l'Entit√©
- **Noms des propri√©t√©s** : Selon le mod√®le de donn√©es
- **Validations** : Selon les r√®gles m√©tier
- **Colonnes de table** : Selon les donn√©es √† afficher
- **Traductions** : Cl√©s sp√©cifiques √† l'entit√©

---

# üß≠ Navigation et Providers AgroFlow

## üìã TitleProvider et NavButtonsProvider

**R√àGLE FONDAMENTALE** : Tous les composants de pages principales DOIVENT impl√©menter `TitleProvider` et `NavButtonsProvider` pour assurer une navigation coh√©rente dans l'application.

### üéØ Fonctionnement dans l'Architecture

L'architecture AgroFlow utilise un syst√®me de routes hi√©rarchiques avec `home.routes.ts` comme point central :

```typescript
// home.routes.ts - Configuration centralis√©e
export const homeRoutes: Route[] = [
  {
    path: '',
    component: HomeComponent, // Composant conteneur
    children: [
      {
        path: 'raw-materials',
        loadChildren: () => import('../raw-materials/raw-materials.routes')
          .then((m) => m.RAW_MATERIALS_ROUTES),
      },
      {
        path: 'suppliers',
        loadChildren: () => import('../suppliers/suppliers.routes')
          .then((m) => m.SUPPLIERS_ROUTES),
      },
      // ... autres modules
    ],
  },
];
```

### üîß Interface TitleProvider

**Objectif** : Fournir le titre de la page de mani√®re dynamique et traduite.

```typescript
interface TitleProvider {
  getTitle(): string;
}
```

#### ‚úÖ Impl√©mentation Obligatoire
```typescript
export class MyEntityComponent implements TitleProvider {
  private readonly translateService = inject(TranslateService);

  getTitle(): string {
    return this.translateService.instant('MY_ENTITY.TITLE');
  }
}
```

#### üéØ Bonnes Pratiques TitleProvider
- **Toujours utiliser** `TranslateService.instant()` pour les traductions
- **Nom de cl√©** : Format `ENTITY.TITLE` (ex: `RAW_MATERIAL.TITLE`)
- **Mode Edit** : Adapter le titre selon le contexte (Create/Edit)

```typescript
// Exemple avec mode Create/Edit
getTitle(): string {
  return this.isEditMode
    ? this.translateService.instant('MY_ENTITY.FORM.EDIT_TITLE')
    : this.translateService.instant('MY_ENTITY.FORM.NEW_TITLE');
}
```

### üîß Interface NavButtonsProvider

**Objectif** : Fournir les boutons d'action de la barre de navigation.

```typescript
interface NavButtonsProvider {
  navButtons(): NavigationButton[];
}

interface NavigationButton {
  label: string;
  icon?: string;
  route?: string | string[];
  tooltip?: string;
  disabled?: boolean;
  action?: () => void;
}
```

#### ‚úÖ Impl√©mentation Standard pour Listes
```typescript
export class MyEntityListComponent implements NavButtonsProvider {
  private readonly translateService = inject(TranslateService);

  navButtons(): NavigationButton[] {
    return [
      {
        label: this.translateService.instant('MY_ENTITY.ADD_BUTTON'),
        icon: 'add',
        action: () => this.addEntity(),
      },
      {
        label: this.translateService.instant('COMMON.REFRESH'),
        icon: 'refresh',
        action: () => this.refreshList(),
      },
    ];
  }
}
```

#### ‚úÖ Impl√©mentation Standard pour Formulaires
```typescript
export class MyEntityFormComponent implements NavButtonsProvider {
  private readonly translateService = inject(TranslateService);

  navButtons(): NavigationButton[] {
    return [
      {
        icon: 'arrow_back',
        label: this.translateService.instant('COMMON.BACK'),
        tooltip: this.translateService.instant('COMMON.BACK'),
        action: () => this.onCancel(),
      },
    ];
  }
}
```

### üéØ Patterns d'Actions Standard

#### üìã Actions pour Composants Liste
```typescript
navButtons(): NavigationButton[] {
  return [
    // Bouton Ajouter - OBLIGATOIRE
    {
      label: this.translateService.instant('ENTITY.ADD_BUTTON'),
      icon: 'add',
      action: () => this.router.navigate(['/home/my-entity/new']),
    },
    // Bouton Actualiser - OBLIGATOIRE
    {
      label: this.translateService.instant('COMMON.REFRESH'),
      icon: 'refresh',
      action: () => this.refreshList(),
    },
    // Boutons optionnels selon les besoins
    {
      label: this.translateService.instant('ENTITY.EXPORT'),
      icon: 'download',
      action: () => this.exportData(),
    },
  ];
}
```

#### üìù Actions pour Composants Formulaire
```typescript
navButtons(): NavigationButton[] {
  return [
    // Bouton Retour - OBLIGATOIRE
    {
      icon: 'arrow_back',
      label: this.translateService.instant('COMMON.BACK'),
      tooltip: this.translateService.instant('COMMON.BACK'),
      action: () => this.router.navigate(['/home/my-entity']),
    },
    // Boutons optionnels
    {
      label: this.translateService.instant('COMMON.SAVE_AND_CONTINUE'),
      icon: 'save',
      action: () => this.saveAndContinue(),
      disabled: !this.entityForm.valid,
    },
  ];
}
```

### üîÑ Int√©gration avec NavigationBarComponent

Les providers sont automatiquement consomm√©s par `NavigationBarComponent` :

```html
<!-- Navigation Bar utilise automatiquement les providers -->
<agroflow-navigation-bar
  [title]="componentInstance.getTitle()"
  [navigationButtons]="componentInstance.navButtons()"
  [homeRoute]="'/home/dashboard'"
>
</agroflow-navigation-bar>
```

### ‚ö†Ô∏è R√®gles Obligatoires

#### ‚úÖ √Ä Respecter Absolument
1. **Tous les composants de page** DOIVENT impl√©menter les deux providers
2. **Traductions** : Toujours utiliser `translateService.instant()`
3. **Ic√¥nes** : Utiliser les ic√¥nes Material Design standard
4. **Actions** : Pr√©f√©rer `action()` √† `route` pour plus de flexibilit√©
5. **Nommage** : Suivre les conventions de cl√©s de traduction

#### ‚ùå Erreurs √† √âviter
- **Ne jamais** retourner des cha√Ænes hardcod√©es (non traduites)
- **Ne jamais** omettre l'impl√©mentation des providers
- **Ne jamais** utiliser des actions complexes directement dans navButtons()
- **Ne jamais** oublier les ic√¥nes pour les boutons principaux

#### üéØ Cl√©s de Traduction Standard
```typescript
// Pour les listes
'ENTITY.TITLE'           // Titre de la page liste
'ENTITY.ADD_BUTTON'      // Bouton d'ajout
'COMMON.REFRESH'         // Bouton actualiser

// Pour les formulaires
'ENTITY.FORM.NEW_TITLE'  // Titre cr√©ation
'ENTITY.FORM.EDIT_TITLE' // Titre √©dition
'COMMON.BACK'            // Bouton retour
```

---

# üåê Internationalisation (i18n)

- ngx-translate, structure des fichiers‚ÄØ: `src/assets/i18n/`
- Fichiers par composant‚ÄØ: `[nom-du-composant]-fr.json`, `[nom-du-composant]-en.json`
- Cl√©s en MAJUSCULES, structure hi√©rarchique
- Jamais de modification directe des fichiers globaux fr.json/en.json
- Script de merge obligatoire apr√®s modification‚ÄØ: `pnpm run merge-translations`
- Lazy loading des fichiers de traduction

---

# üß™ Tests

- Tests unitaires obligatoires (Jest ou Karma)
- Pattern Arrange-Act-Assert

---

# üîó R√©f√©rences

- [10_project-architecture.mdc](mdc:10_project-architecture.mdc)
- [@04-i18n.mdc](mdc:@04-i18n.mdc)
- [00_shared-prompts.mdc](mdc:00_shared-prompts.mdc)
