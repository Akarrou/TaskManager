# üìú R√®gle : 100_rule-refinement-process

## R√¥le & Contexte

Cette m√©ta-r√®gle d√©finit le processus de gouvernance pour l'am√©lioration continue du syst√®me de r√®gles AgroFlow. Elle n'est pas d√©clench√©e par un workflow de d√©veloppement, mais sert de guide pour l'ing√©nieur IA pour maintenir et optimiser les r√®gles.

---

## üîÑ Le Cycle d'Am√©lioration It√©ratif

Le processus de raffinement des r√®gles suit un cycle en 4 √©tapes : **Mesurer ‚Üí Analyser ‚Üí Proposer ‚Üí Impl√©menter**.

### 1. Mesurer (Collecte de Donn√©es)

- **Quoi** : Collecter passivement les donn√©es issues du monitoring et des feedbacks.
  - **M√©triques de Performance** : Logs g√©n√©r√©s via `metrics-logger.mdc`.
  - **Feedbacks Utilisateur** : R√©ponses collect√©es via `user-feedback-prompt.mdc`.
- **O√π** : Les donn√©es sont stock√©es conceptuellement pour une analyse ult√©rieure.

### 2. Analyser (D√©tection de Patrons)

- **Quoi** : Analyser p√©riodiquement les donn√©es collect√©es pour identifier des tendances.
- **Exemples de "Red Flags" √† rechercher** :
  - **Performance** : Une r√®gle (`10_prd-builder`) dont le temps d'ex√©cution `duration_ms` augmente constamment sur plusieurs ex√©cutions.
  - **Fiabilit√©** : Un appel MCP (`mcp_supabase_query`) qui a un taux d'√©chec (`status: "failure"`) √©lev√©.
  - **Exp√©rience Utilisateur** : Un workflow qui re√ßoit fr√©quemment un feedback "üëé Non".
  - **Coh√©rence** : Des d√©viations par rapport aux sc√©narios d√©finis dans `99_rules-test-suite.mdc`.

### 3. Proposer (Plan d'Action)

- **Quoi** : Bas√© sur l'analyse, formuler une proposition d'am√©lioration claire.
- **Format de la Proposition** :
  - **Probl√®me** : Description concise du probl√®me d√©tect√© (ex: "La r√®gle `25_prp-builder` est 30% plus lente depuis la derni√®re mise √† jour.").
  - **Cause Racine (Hypoth√®se)** : Hypoth√®se sur la cause du probl√®me (ex: "L'analyse statique du codebase est devenue inefficace.").
  - **Solution Propos√©e** : Changement sp√©cifique √† apporter √† une ou plusieurs r√®gles (ex: "Remplacer `codebase_search` par une recherche `grep` plus cibl√©e pour ce cas.").
  - **Impact Attendu** : M√©trique quantifiable (ex: "R√©duire le temps d'ex√©cution de 200ms.").
  - **Risques** : Risques de r√©gression potentiels.

### 4. Impl√©menter (Application du Changement)

- **Quoi** : Appliquer la modification propos√©e apr√®s validation de l'utilisateur.
- **Processus d'Impl√©mentation** :
  1.  **Validation Utilisateur** : Pr√©senter la proposition √† l'utilisateur pour approbation.
  2.  **Modification** : Appliquer le changement sur la ou les r√®gles concern√©es.
  3.  **Tests de Non-R√©gression** : Ex√©cuter manuellement les sc√©narios pertinents de `99_rules-test-suite.mdc` pour s'assurer que le changement n'a pas d'effets de bord n√©gatifs.
  4.  **D√©ploiement** : La nouvelle version de la r√®gle est active. Le cycle recommence.

---

## üîó R√©f√©rences Crois√©es

- [metrics-logger.mdc](mdc:fragments/metrics-logger.mdc)
- [user-feedback-prompt.mdc](mdc:fragments/user-feedback-prompt.mdc)
- [99_rules-test-suite.mdc](mdc:99_rules-test-suite.mdc)

---
