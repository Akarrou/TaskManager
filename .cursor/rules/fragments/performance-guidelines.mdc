---
description: Guidelines de performance pour optimiser le systÃ¨me de rÃ¨gles AgroFlow
globs: ["**/*.mdc"]
alwaysApply: false
---

# ğŸš€ Guidelines de Performance

## ğŸ¯ Objectif

DÃ©finir les bonnes pratiques de performance pour le systÃ¨me de rÃ¨gles et les workflows AgroFlow.

## âš¡ Performance des RÃ¨gles

### Temps de RÃ©ponse Cibles

- **Validation simple** : < 100ms
- **Recherche MCP Supabase** : < 500ms
- **GÃ©nÃ©ration PRD** : < 2s
- **CrÃ©ation tÃ¢ches** : < 1s par tÃ¢che

### Optimisations RecommandÃ©es

1. **Cache intelligent** : Utiliser les caches locaux systÃ©matiquement
2. **RequÃªtes parallÃ¨les** : Grouper les appels MCP
3. **Validation anticipÃ©e** : Valider dÃ¨s que possible
4. **Interruption rapide** : Ã‰chec rapide sur erreur critique

## ğŸ“Š MÃ©triques de Monitoring

### KPIs SystÃ¨me

- **Taux de succÃ¨s** : > 95%
- **Temps de rÃ©solution** : < 30s par workflow
- **Utilisation cache** : > 70%
- **Erreurs MCP** : < 5%

### Benchmarks

```javascript
// Benchmark validation
const startTime = performance.now();
await validationProcess();
const duration = performance.now() - startTime;
console.log(`Validation: ${duration}ms`);
```

## ğŸ›¡ï¸ Gestion des Ressources

### Limites RecommandÃ©es

- **Taille fichier PRD** : < 50KB
- **Nombre tÃ¢ches par PRD** : < 20
- **Profondeur hiÃ©rarchie** : < 5 niveaux
- **Cache size** : < 100MB

### Nettoyage Automatique

1. **Cache obsolÃ¨te** : Nettoyer > 24h
2. **Logs anciens** : Rotation 7 jours
3. **Temp files** : Suppression immÃ©diate
4. **Fallback data** : Sync puis purge

## ğŸ”§ Optimisations Techniques

### Patterns Efficaces

```javascript
// Pattern: Validation groupÃ©e
const validationResults = await Promise.allSettled([
  validatePRD(),
  validateTasks(),
  validatePermissions(),
]);

// Pattern: Cache first
const cachedData = getFromCache(key);
if (!cachedData) {
  const data = await fetchFromSupabase();
  setCache(key, data);
  return data;
}
```

### Anti-Patterns Ã  Ã‰viter

- âŒ Validation sÃ©quentielle
- âŒ Appels MCP redondants
- âŒ Cache non utilisÃ©
- âŒ GÃ©nÃ©ration synchrone bloquante

## ğŸ“ˆ StratÃ©gies d'AmÃ©lioration

### Performance Progressive

1. **Mesurer** : Ã‰tablir baseline actuelle
2. **Identifier** : Points de friction principaux
3. **Optimiser** : Solutions ciblÃ©es
4. **Valider** : Mesurer l'amÃ©lioration

### Monitoring Continu

- **Logs structurÃ©s** : Timing + mÃ©tadata
- **Alertes intelligentes** : Seuils adaptatifs
- **Dashboards** : Vue temps rÃ©el
- **Reports** : Analyse tendances

## ğŸ¯ Checklist Performance

### Avant DÃ©ploiement

- [ ] Benchmarks exÃ©cutÃ©s
- [ ] MÃ©triques dans les cibles
- [ ] Cache configurÃ©
- [ ] Fallbacks testÃ©s

### En Production

- [ ] Monitoring actif
- [ ] Alertes configurÃ©es
- [ ] Nettoyage automatique
- [ ] Optimisations continues

## ğŸ“‹ Templates de Monitoring

### Rapport Performance

```markdown
## ğŸ“Š Rapport Performance - {DATE}

### MÃ©triques ClÃ©s

- **Temps moyen** : {AVERAGE_TIME}ms
- **Taux succÃ¨s** : {SUCCESS_RATE}%
- **Pic charge** : {PEAK_LOAD}

### Recommandations

{OPTIMIZATION_SUGGESTIONS}
```

### Alert Template

```markdown
## ğŸš¨ Alerte Performance

**MÃ©trique** : {METRIC_NAME}
**Valeur** : {CURRENT_VALUE}
**Seuil** : {THRESHOLD}
**Impact** : {SEVERITY}

**Action requise** : {RECOMMENDED_ACTION}
```
