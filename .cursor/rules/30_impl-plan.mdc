# üìù Plan d'Impl√©mentation D√©taill√© (Pilot√© par PRP)

## R√¥le & Contexte

Ce document d√©finit la m√©thodologie pour cr√©er un plan d'impl√©mentation technique d√©taill√© pour une t√¢che sp√©cifique. Son ex√©cution est **strictement conditionn√©e par l'existence pr√©alable d'un "Product Requirement Prompt" (PRP) valid√©** pour la t√¢che concern√©e. L'agent utilise le PRP comme source de v√©rit√© principale pour son analyse et sa planification.

---

## 0. üö¶ Pr√©requis : Lecture du PRP

Avant toute analyse, l'agent doit imp√©rativement :

1.  **Identifier le PRP** : Construire le chemin du fichier attendu : `/PRPs/prp-task-{TASK_NUMBER}.md`.
2.  **V√©rifier son Existence** : Contr√¥ler la pr√©sence de ce fichier.
3.  **Agir en Cons√©quence** :
    - ‚úÖ **Si le fichier existe** : Le lire int√©gralement. Le PRP devient la base pour toutes les √©tapes suivantes (contexte, analyse, plan d'action, validation).
    - ‚ùå **Si le fichier n'existe PAS** : **Arr√™ter imm√©diatement le processus.** Informer l'utilisateur qu'un PRP est manquant et qu'il doit √™tre g√©n√©r√© via la commande : `cr√©e un prp pour la t√¢che #{TASK_NUMBER}`. **NE PAS CONTINUER SANS PRP.**

---

## 1. üß† M√©thodologie d'Analyse (Bas√©e sur le PRP)

### Principe Fondamental

Le plan d'impl√©mentation est une **extension technique et d√©taill√©e** du PRP.

- **R√©flexion Analytique** : Utiliser les sections `All Needed Context` et `Known Gotchas` du PRP pour nourrir la r√©flexion.
- **Hi√©rarchie de T√¢ches** : R√©cup√©rer la hi√©rarchie (Epic ‚Üí Feature ‚Üí T√¢che) depuis Supabase pour contextualiser le plan.
- **Guidelines** : Consulter les guidelines (`guideline_refs` de la t√¢che) pour s'assurer de la conformit√© technique.

---

## 2. üìã Livrable : Plan d'Impl√©mentation D√©taill√©

L'agent doit produire un rapport Markdown structur√© comme suit :

```markdown
## üìã Plan d'Impl√©mentation pour la T√¢che #{TASK_NUMBER} : [Titre de la t√¢che]

### üí≠ R√©flexion Analytique

> (Synth√®se de la r√©flexion de l'agent, bas√©e sur les "Known Gotchas" et le contexte du PRP)

#### üéØ Strat√©gie Conceptuelle

> (Approche technique choisie pour r√©pondre au "Goal" du PRP)

#### ‚ö†Ô∏è Points d'Attention Identifi√©s

> (Risques et d√©fis sp√©cifiques √† l'impl√©mentation)

### üè∑Ô∏è Hi√©rarchie de la T√¢che

- **Epic parent** : [Titre, slug, uuid]
- **Feature parente** : [Titre, slug, uuid]
- **T√¢che courante** : [Titre, slug, uuid]

### üîç √âtat Actuel du Code (Bas√© sur le PRP)

> (Synth√®se de l'analyse des fichiers mentionn√©s dans la section `All Needed Context` du PRP)

### üìù Plan d'Action D√©taill√©

> (D√©tail technique du **Implementation Blueprint** du PRP)

#### Phase 1 : Backend

1.  **[Action 1]** : [Description pr√©cise avec fichiers concern√©s]
2.  ...

#### Phase 2 : Frontend

1.  **[Action 1]** : [Description pr√©cise avec fichiers concern√©s]
2.  ...

#### Phase 3 : Impact sur la Documentation

> (Bas√© sur les changements de code, lister ici les fichiers de `/docs` √† cr√©er ou mettre √† jour, en s'appuyant sur `60_docs-generator.mdc`)

1.  **Mettre √† jour** `docs/03_Backend.md` pour refl√©ter le nouvel endpoint.
2.  **Cr√©er** `docs/features/new-feature.md` pour d√©crire la nouvelle fonctionnalit√©.

#### Phase 4 : Tests de Validation

> Pour cette phase, le processus est d√©fini dans le fragment `.cursor/rules/fragments/validation-loop-template.mdc`. Vous devrez l'ex√©cuter √† la fin de l'impl√©mentation.

### üîó D√©pendances

> (Rappel des d√©pendances identifi√©es dans le PRP)

### ‚è±Ô∏è Estimation

- **Complexit√©** : [Faible/Moyenne/√âlev√©e]
- **Temps estim√©** : [Estimation en jours/heures]

> Si ce plan ne vous convient pas, vous pouvez demander une r√©vision en utilisant la commande : `/revise_plan #{TASK_NUMBER}`
```

---

## 3. ‚öôÔ∏è Ex√©cution et Workflow

### 3.1 Workflow Git

- **Branche** : Cr√©er une branche `feature/task/{TASK_NUMBER}-{titre-simplifie}` depuis `main`.
- **Commits** : Effectuer des commits fr√©quents et descriptifs. Le message de chaque commit sera ajout√© aux commentaires de la t√¢che dans Supabase.
  - `feat(#123): ...`
  - `fix(#123): ...`
  - `test(#123): ...`

### 3.2 Gestion du Statut dans Supabase

- **D√©but de T√¢che** : Au premier commit, la t√¢che passe automatiquement √† `in_progress`. Ses parents (feature, epic) passent aussi √† `in_progress` si ce n'est pas d√©j√† le cas.
- **Fin de T√¢che** : Une fois la boucle de validation du fragment `validation-loop-template.mdc` r√©ussie et valid√©e par l'utilisateur, la t√¢che passe √† `completed`. Si toutes les t√¢ches s≈ìurs sont compl√©t√©es, la feature parente passe aussi √† `completed` (et ainsi de suite pour l'epic).

---

## 4. üîó R√©f√©rences

- Le PRP associ√© (`/PRPs/prp-task-{TASK_NUMBER}.md`)
- [10_project-architecture.mdc](mdc:10_project-architecture.mdc)
- [40_guidelines-frontend.mdc](mdc:40_guidelines-frontend.mdc)
- [41_guidelines-backend.mdc](mdc:41_guidelines-backend.mdc)
- [20_task-breakdown.mdc](mdc:20_task-breakdown.mdc)
- [Quality Gate](mdc:50_quality-gate.mdc)
