@use "../../../styles/variables" as v;
@use "../../../styles/mixins" as m;
@use "../../../styles/kanban-variables" as kanban;

// ============================================================================
// GENERIC KANBAN - Component Styles
// Author: TaskManager AI
// Date: 2024-08-01
// Description: Styles for a reusable Kanban board component.
// ============================================================================

:host {
  display: block;
  width: 100%;
}

.generic-kanban-container {
  width: 100%;

  .kanban-title {
    font-size: v.$font-size-3xl;
    font-weight: v.$font-weight-bold;
    color: v.$text-color-dark;
    margin-bottom: v.$space-6;
    padding: 0 v.$space-4;
  }

  // ============================================================================
  // LOADING STATE
  // ============================================================================
  .loading-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: v.$space-10;
    color: v.$text-color-medium;

    .loading-spinner {
      font-size: 2.5rem;
      margin-bottom: v.$space-4;
      animation: spin 1.5s linear infinite;
    }

    span {
      font-size: v.$font-size-lg;
    }
  }

  // ============================================================================
  // ERROR STATE
  // ============================================================================
  .error-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    max-width: 480px;
    margin: v.$space-4 auto;
    padding: v.$space-8;
    background-color: v.$danger-bg;
    border: 1px solid v.$danger-border;
    border-radius: v.$border-radius-lg;

    .error-icon {
      font-size: 3rem;
      color: v.$error-color;
      margin-bottom: v.$space-4;
    }

    h3 {
      font-size: v.$font-size-2xl;
      font-weight: v.$font-weight-bold;
      color: v.$danger-text;
      margin-bottom: v.$space-2;
    }

    p {
      color: v.$text-color-medium;
      margin-bottom: v.$space-6;
    }

    button {
      background-color: v.$primary-color;
      color: v.$text-color-inverted;
    }
  }

  // ============================================================================
  // KANBAN BOARD LAYOUT
  // ============================================================================
  .kanban-board-content {
    width: 100%;
  }

  .kanban-columns-container {
    display: flex;
    flex-direction: row;
    gap: v.$space-4;
    overflow-x: auto;
    padding: v.$space-4;
    min-height: calc(100vh - 250px); // Adjust based on header/footer height

    // Custom scrollbar for horizontal scrolling
    scrollbar-width: thin;
    scrollbar-color: v.$border-color-medium v.$background-color-light;

    &::-webkit-scrollbar {
      height: 8px;
    }

    &::-webkit-scrollbar-track {
      background: v.$background-color-light;
      border-radius: 4px;
    }

    &::-webkit-scrollbar-thumb {
      background: v.$border-color-medium;
      border-radius: 4px;

      &:hover {
        background: v.$secondary-color-light;
      }
    }

    // Direct child selector for columns
    > app-kanban-column {
      flex: 0 0 340px; // Do not grow, do not shrink, base width 340px
      max-width: 340px;
      height: 100%;
    }
  }
}

// ============================================================================
// KEYFRAME ANIMATIONS
// ============================================================================

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// ============================================================================
// RESPONSIVE BREAKPOINTS
// ============================================================================

@media (max-width: 768px) {
  .generic-kanban-container {
    .kanban-columns-container {
      gap: v.$space-3;
      padding: v.$space-2;

      > app-kanban-column {
        flex: 0 0 300px;
        max-width: 300px;
      }
    }
  }
}

@media (max-width: 480px) {
  .generic-kanban-container {
    .kanban-columns-container {
      > app-kanban-column {
        flex: 0 0 280px;
        max-width: 280px;
      }
    }
  }
}
