<div class="c-main-content">
    <!-- Header -->
    <div class="c-main-content__header">
        <div>
            <h1 class="c-main-content__title">{{ pageTitle() }}</h1>
            <p class="c-main-content__subtitle">
                {{ isEditMode() ? 'Modifiez les informations de votre projet' : 'Créez un nouveau projet pour organiser votre travail' }}
            </p>
        </div>
    </div>

    <!-- Form Card -->
    <div class="c-form-card">
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <!-- Champ Nom du projet -->
            <div class="c-form-group">
                <label for="name" class="c-form-label">
                    Nom du projet
                    <span class="c-form-label__required">*</span>
                </label>
                <input
                    id="name"
                    type="text"
                    formControlName="name"
                    class="c-form-input"
                    [class.c-form-input--error]="form.get('name')?.invalid && form.get('name')?.touched"
                    placeholder="Ex: Site web e-commerce">
                <div *ngIf="form.get('name')?.invalid && form.get('name')?.touched" class="c-form-error">
                    <span *ngIf="form.get('name')?.errors?.['required']">Le nom est requis.</span>
                    <span *ngIf="form.get('name')?.errors?.['minlength']">Le nom doit contenir au moins 3 caractères.</span>
                </div>
            </div>

            <!-- Champ Description -->
            <div class="c-form-group">
                <label for="description" class="c-form-label">
                    Description
                </label>
                <textarea
                    id="description"
                    formControlName="description"
                    rows="4"
                    class="c-form-input c-form-textarea"
                    placeholder="Décrivez l'objectif et le contexte de ce projet..."></textarea>
            </div>

            <!-- Section Invitations -->
            <app-inline-invitations
                [projectId]="projectId()"
                [isCreationMode]="!isEditMode()">
            </app-inline-invitations>

            <!-- Boutons d'action -->
            <div class="c-form-actions">
                <button
                    type="button"
                    (click)="onCancel()"
                    class="c-button c-button--secondary">
                    <span class="material-icons-outlined">close</span>
                    Annuler
                </button>
                <button
                    type="submit"
                    [disabled]="form.invalid"
                    class="c-button c-button--primary"
                    [class.c-button--disabled]="form.invalid">
                    <span class="material-icons-outlined">{{ isEditMode() ? 'save' : 'add' }}</span>
                    {{ isEditMode() ? 'Sauvegarder' : 'Créer le projet' }}
                </button>
            </div>
        </form>
    </div>
</div>
