<div class="kanban-column" [style.background-color]="column.color">
  
  <!-- Column Header -->
  <div class="column-header">
    <div class="header-left">
      <mat-icon class="column-icon">{{ getColumnIcon() }}</mat-icon>
      <h3 class="column-title">{{ column.title }}</h3>
      <span class="feature-count" [matBadge]="features.length" matBadgeColor="primary">
        ({{ features.length }})
      </span>
    </div>
    
    <div class="header-actions">
      <button mat-icon-button (click)="onToggleCollapse()" class="toggle-button">
        <mat-icon>{{ column.isCollapsed ? 'expand_more' : 'expand_less' }}</mat-icon>
      </button>
    </div>
  </div>

  <!-- WIP Limit Warning -->
  <div *ngIf="column.wipLimit && features.length > column.wipLimit" class="wip-warning">
    <mat-icon>warning</mat-icon>
    <span>Limite WIP dépassée ({{ features.length }}/{{ column.wipLimit }})</span>
  </div>

  <!-- Column Content -->
  <div class="column-content" [class.collapsed]="column.isCollapsed">
    
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <mat-icon class="spin">hourglass_empty</mat-icon>
      <span>Chargement...</span>
    </div>

    <!-- Features List -->
    <div *ngIf="!isLoading" class="features-list">
      
      <!-- Feature Cards -->
      <div *ngFor="let feature of features; trackBy: trackFeature" class="feature-card-wrapper">
        <app-feature-card
          [feature]="feature"
          [tasks]="getFeatureTasks(feature.id!)"
          [isExpanded]="isFeatureExpanded(feature.id!)"
          [showProgress]="true"
          (featureClick)="onFeatureClick($event)"
          (featureEdit)="onFeatureEdit($event)"
          (featureDelete)="onFeatureDelete($event)"
          (toggleExpansion)="onToggleFeatureExpansion($event)"
          (taskStatusChange)="onTaskStatusChanged($event)">
        </app-feature-card>
      </div>

      <!-- Empty State -->
      <div *ngIf="features.length === 0" class="empty-state">
        <mat-icon>inbox</mat-icon>
        <span>Aucune feature</span>
      </div>

    </div>
  </div>

</div> 