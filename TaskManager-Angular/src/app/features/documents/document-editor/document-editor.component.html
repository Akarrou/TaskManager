<div class="document-container">
  <!-- Title Header -->
  <div class="title-container">
    <input
      type="text"
      [ngModel]="documentState().title"
      (ngModelChange)="onTitleChange($event)"
      placeholder="Nouvelle page"
      class="title-input"
    />
  </div>

  <!-- Save Status Indicator -->
  <div class="save-status">
    <span *ngIf="documentState().isSaving">
      <span class="save-indicator"></span>
      Sauvegarde...
    </span>
    <span *ngIf="!documentState().isSaving && documentState().lastSaved">
      Dernière modification : {{ documentState().lastSaved | date:'HH:mm' }}
    </span>
    <span *ngIf="isDirty()" class="text-orange-500 text-xs ml-2">
      • Non sauvegardé
    </span>
  </div>

  <!-- Editor Content -->
  <div
    class="editor-wrapper"
    (click)="focusEditor($event)">
    <tiptap-editor
      [editor]="editor"
      class="editor-content">
    </tiptap-editor>
  </div>

  <!-- Slash Menu -->
  <app-slash-menu
    *ngIf="showSlashMenu()"
    [items]="menuItems"
    [selectedIndex]="slashMenuIndex()"
    (commandSelected)="executeCommand($event)"
    [style.top.px]="slashMenuPosition().top"
    [style.left.px]="slashMenuPosition().left"
    class="slash-menu">
  </app-slash-menu>

  <!-- Bubble Menu (text selection) -->
  <app-bubble-menu
    *ngIf="showBubbleMenu() && !isDragging() && !bubbleMenuDisabled()"
    [editor]="editor"
    [style.top.px]="bubbleMenuPosition().top"
    [style.left.px]="bubbleMenuPosition().left"
    class="bubble-menu-wrapper">
  </app-bubble-menu>

  <!-- Navigation FAB -->
  <app-navigation-fab
    [context]="fabContext()"
    [customActions]="fabActions"
    position="bottom-right">
  </app-navigation-fab>
</div>
