# ===================================================================
# TaskManager - Environment Variables Template
# ===================================================================
#
# IMPORTANT: Copy this file to .env.local or .env.production
# and fill in the values with actual secrets.
#
# Generate secrets with: ./scripts/generate-secrets.sh
#
# ===================================================================

# ===================================================================
# APPLICATION CONFIGURATION
# ===================================================================

# Environment mode (development or production)
BUILD_ENV=production
PRODUCTION=true

# Application name
PROJECT_NAME=Kōdo Task Manager

# ===================================================================
# NETWORK & PORTS
# ===================================================================

# Angular Application
APP_PORT=4010

# Supabase Kong API Gateway
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

# Supabase Studio (Admin Dashboard)
STUDIO_PORT=3000

# ===================================================================
# PUBLIC URLS
# ===================================================================

# Public URL for Supabase API (accessible from browser)
# Local:      http://localhost:8000
# VPS:        http://YOUR_VPS_IP:8000 or https://api.yourdomain.com
SUPABASE_PUBLIC_URL=http://localhost:8000

# External API URL (for authentication redirects)
API_EXTERNAL_URL=http://localhost:8000

# Site URL (where your Angular app is hosted)
# Local:      http://localhost:4010
# VPS:        http://YOUR_VPS_IP:4010 or https://yourdomain.com
SITE_URL=http://localhost:4010

# Additional redirect URLs for auth (comma-separated)
ADDITIONAL_REDIRECT_URLS=http://localhost:4010/*

# ===================================================================
# SECURITY & SECRETS
# ===================================================================
# ⚠️  CHANGE ALL VALUES BELOW BEFORE GOING TO PRODUCTION!
# Use ./scripts/generate-secrets.sh to generate secure values
# ===================================================================

# PostgreSQL Database Password (min. 32 characters)
POSTGRES_PASSWORD=your-super-secret-and-long-postgres-password

# JWT Secret (min. 32 characters)
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long

# JWT Expiry in seconds (3600 = 1 hour)
JWT_EXPIRY=3600

# Anonymous Key (JWT token for anonymous access)
# Generate with ./scripts/generate-secrets.sh
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE

# Service Role Key (JWT token for service access - KEEP SECRET!)
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q

# Dashboard credentials (Supabase Studio login)
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=this_password_is_insecure_and_should_be_updated

# Secret key base for encryption (min. 64 characters)
SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq

# Vault encryption key (exactly 32 characters)
VAULT_ENC_KEY=your-32-character-encryption-key

# PostgreSQL Meta encryption key (min. 32 characters)
PG_META_CRYPTO_KEY=your-encryption-key-32-chars-min

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================

# PostgreSQL Host (Docker service name)
POSTGRES_HOST=db

# PostgreSQL Database Name
POSTGRES_DB=postgres

# PostgreSQL Port
POSTGRES_PORT=5432

# PostgREST schemas to expose
PGRST_DB_SCHEMAS=public,storage,graphql_public

# ===================================================================
# DATABASE POOLER (Supavisor)
# ===================================================================

# Port for transaction pooling
POOLER_PROXY_PORT_TRANSACTION=6543

# Maximum PostgreSQL connections per pool
POOLER_DEFAULT_POOL_SIZE=20

# Maximum client connections per pool
POOLER_MAX_CLIENT_CONN=100

# Unique tenant identifier
POOLER_TENANT_ID=your-tenant-id

# Pool size for Supavisor internal use
POOLER_DB_POOL_SIZE=5

# ===================================================================
# AUTHENTICATION SETTINGS
# ===================================================================

# Disable new user signups (true/false)
DISABLE_SIGNUP=false

# Enable email/password signup
ENABLE_EMAIL_SIGNUP=true

# Enable anonymous users
ENABLE_ANONYMOUS_USERS=false

# Auto-confirm email signups (dev only, disable in production!)
ENABLE_EMAIL_AUTOCONFIRM=true

# Enable phone signup
ENABLE_PHONE_SIGNUP=false

# Auto-confirm phone signups
ENABLE_PHONE_AUTOCONFIRM=false

# ===================================================================
# EMAIL CONFIGURATION (SMTP)
# ===================================================================

# SMTP Admin Email
SMTP_ADMIN_EMAIL=admin@example.com

# SMTP Host (e.g., smtp.gmail.com, smtp.sendgrid.net)
SMTP_HOST=

# SMTP Port (usually 587 for TLS, 465 for SSL)
SMTP_PORT=587

# SMTP Username
SMTP_USER=

# SMTP Password
SMTP_PASS=

# Email Sender Name
SMTP_SENDER_NAME=TaskManager

# Email URL paths for authentication emails
MAILER_URLPATHS_INVITE=/auth/v1/verify
MAILER_URLPATHS_CONFIRMATION=/auth/v1/verify
MAILER_URLPATHS_RECOVERY=/auth/v1/verify
MAILER_URLPATHS_EMAIL_CHANGE=/auth/v1/verify

# ===================================================================
# STORAGE CONFIGURATION
# ===================================================================

# Storage backend (file or s3)
STORAGE_BACKEND=file

# Enable WebP image detection
IMGPROXY_ENABLE_WEBP_DETECTION=true

# ===================================================================
# EDGE FUNCTIONS
# ===================================================================

# Verify JWT for Edge Functions
FUNCTIONS_VERIFY_JWT=true

# ===================================================================
# ANALYTICS (Logflare)
# ===================================================================

# Public access token for analytics
LOGFLARE_PUBLIC_ACCESS_TOKEN=your-logflare-public-token

# Private access token for analytics
LOGFLARE_PRIVATE_ACCESS_TOKEN=your-logflare-private-token

# ===================================================================
# SUPABASE STUDIO SETTINGS
# ===================================================================

# Default organization name in Studio
STUDIO_DEFAULT_ORGANIZATION=Default Organization

# Default project name in Studio
STUDIO_DEFAULT_PROJECT=TaskManager

# OpenAI API Key (optional, for AI features in Studio)
OPENAI_API_KEY=

# ===================================================================
# DOCKER CONFIGURATION
# ===================================================================

# Docker socket location (for vector logging)
DOCKER_SOCKET_LOCATION=/var/run/docker.sock

# ===================================================================
# DEVELOPMENT vs PRODUCTION NOTES
# ===================================================================
#
# DEVELOPMENT (.env.local):
# - SUPABASE_PUBLIC_URL=http://localhost:8000
# - SITE_URL=http://localhost:4010
# - ENABLE_EMAIL_AUTOCONFIRM=true
# - SMTP can be empty (no emails sent)
#
# PRODUCTION (.env.production):
# - SUPABASE_PUBLIC_URL=https://api.yourdomain.com (or http://YOUR_VPS_IP:8000)
# - SITE_URL=https://yourdomain.com (or http://YOUR_VPS_IP:4010)
# - ENABLE_EMAIL_AUTOCONFIRM=false
# - Configure SMTP for email sending
# - ALL secrets must be regenerated with ./scripts/generate-secrets.sh
#
# ===================================================================
