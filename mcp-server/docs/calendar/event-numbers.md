# Event Numbers

## Overview

Every event created in an event-type database receives an auto-generated **event number** in the format `EVT-XXXX`. This provides a human-readable, sequential identifier for referencing events.

## Format

```
EVT-0001
EVT-0042
EVT-1234
```

- Prefix: `EVT-`
- Number: zero-padded to 4 digits
- Sequence: monotonically increasing, global across all event databases

## Generation

Event numbers are generated by a PostgreSQL sequence via the `get_next_event_number()` RPC function. This ensures:
- **Uniqueness**: No two events share the same number
- **Monotonic**: Numbers always increase
- **Concurrent-safe**: Multiple simultaneous creations each get a distinct number (gaps may occur if a transaction rolls back)

The sequence is global — not per-database — so event numbers are unique across all event databases in the workspace.

## Readonly

Event numbers are **readonly** and cannot be modified after creation:
- The `Event Number` column has `readonly: true` in the database config
- `update_event` does not accept an `event_number` parameter
- The number is assigned automatically during `create_event`

## MCP Usage

### Search by Event Number

Use `get_event_by_number` to find an event by its number:

```
get_event_by_number({
  event_number: "EVT-0042",
  include_document: true
})
```

This searches across all accessible event databases and returns both the event and its linked document.

### Event Number in Responses

All event-related tools (`list_events`, `get_event`, `create_event`, `update_event`) include `event_number` in their response when available.

## Google Calendar Sync

When events are synced to Google Calendar, the event number is stored in Google's `extendedProperties.private.kodoEventNumber` field. This allows round-trip identification of Kodo events in Google Calendar.
